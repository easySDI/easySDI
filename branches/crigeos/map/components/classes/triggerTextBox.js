
EasySDI_Map.triggerTextBox=Ext.extend(Ext.form.TriggerField,{defaultAutoCreate:{tag:"input",type:"text",size:"24"},hideTrigger:true,minChars:1,timedDelay:500,initEvents:function(){EasySDI_Map.triggerTextBox.superclass.initEvents.call(this);this.keyNav=new Ext.KeyNav(this.el,{scope:this,doRelay:function(foo,bar,hname){if(hname=='down'){return Ext.KeyNav.prototype.doRelay.apply(this,arguments);}
return true;},forceKeyDown:true});this.dqTask=new Ext.util.DelayedTask(this.timedFunction,this);this.el.on("keyup",this.onKeyUp,this);},onDestroy:function(){if(this.dqTask){this.dqTask.cancel();this.dqTask=null;}
EasySDI_Map.triggerTextBox.superclass.onDestroy.call(this);},onKeyUp:function(e){if(!e.isSpecialKey()){this.lastKey=e.getKey();this.dqTask.delay(this.timedDelay);}},timedFunction:function(){var q=this.getRawValue();if(q===undefined||q===null){q='';}
if(q.length>=this.minChars){if(this.handler){this.handler.call(this.handlerScope||this,this.getRawValue());}}},getRawValue:function(){var v=this.rendered?this.el.getValue():Ext.value(this.value,'');if(v===this.emptyText){v='';}
return v;},clearValue:function(){this.setRawValue('');this.applyEmptyText();this.value='';}});EasySDI_Map.triggerSearchStoreBox=Ext.extend(EasySDI_Map.triggerTextBox,{queryParam:'query',doQuery:function(q,forceAll){if(q===undefined||q===null){q='';}
if(forceAll===true||(q.length>=this.minChars)){this.store.baseParams[this.queryParam]="*"+q;this.store.load({});};},timedFunction:function(){this.doQuery(this.getRawValue());},bindStore:function(store){if(store){this.store=Ext.StoreMgr.lookup(store);}else{this.store=null;}}});
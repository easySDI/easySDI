<?xml version="1.0" ?>
<project default="sync" basedir=".">

	<property name="projet.out.dir" value="out" />
	<property name="project.deploy.dir" value="C:/www/Server/sdiv1" />


	<target name="com_easysdi" depends="create-structure,compression" description="Main target">

	</target>

	<target name="create-structure">
		<echo>Creating the working directory structure</echo>
		<delete>
			<fileset dir="${projet.out.dir}" includes="*" />
		</delete>
		<mkdir dir="${projet.out.dir}" />
	</target>

	<target name="upload" depends="compression">
		<scp file="${projet.out.dir}/com_easysdi_core.zip" todir="admin:easysdi@10.11.224.49:/var/data/joomla15/tmp" trust="true" />
		<sshexec host="10.11.224.49" username="admin" password="easysdi" trust="true" command="
			cd /var/data/joomla15/tmp;
			rm -r core;
			mkdir core;
			cd core;
			unzip ../com_easysdi_core.zip;
			cd ..;
		rm com_easysdi_core.zip;" />
	</target>
	
	<target name="compression" description="Compression">
		<jar compress="true" jarfile="${projet.out.dir}/com_easysdi_core.zip" basedir="." excludes=" modules/** , out/** , .cache/** , .svn/** , .settings/** , .project, .prefs, build.xml" />
	</target>

	<target name="sync" description="Copy from here to apache">
		<copy todir="${project.deploy.dir}/administrator/components/com_easysdi_core">
			<fileset dir=".">
				<include name="**/*.php" />
				<include name="**/*.xsl" />
				<include name="**/*.inc" />
				<include name="**/*.jar" />
				<include name="**/*.xml" />
				<include name="**/*.png" />
				<include name="**/*.ttf" />
				<include name="**/*.txt" />
				<include name="**/*.js" />
				<include name="**/*.css" />
				<include name="**/*.xml" />
				<exclude name="**/com_easysdi_core/**" />
			</fileset>
		</copy>
		<copy todir="${project.deploy.dir}/components/com_easysdi_core">
			<fileset dir="./com_easysdi_core">
				<include name="**/*.php" />
				<include name="**/*.xsl" />
				<include name="**/*.inc" />
				<include name="**/*.jar" />
				<include name="**/*.xml" />
				<include name="**/*.png" />
				<include name="**/*.ttf" />
				<include name="**/*.txt" />
				<include name="**/*.js" />
			</fileset>
		</copy>
		<copy todir="${project.deploy.dir}/language/fr-FR">
			<fileset dir="./language/site">
				<include name="**/fr-FR.com_easysdi_core.ini" />
			</fileset>
		</copy>
		<copy todir="${project.deploy.dir}/language/en-GB">
			<fileset dir="./language/site">
				<include name="**/en-GB.com_easysdi_core.ini" />
			</fileset>
		</copy>
		<copy todir="${project.deploy.dir}/administrator/language/fr-FR">
			<fileset dir="./language/admin">
				<include name="**/fr-FR.com_easysdi_core.ini" />
			</fileset>
		</copy>
		<copy todir="${project.deploy.dir}/administrator/language/en-GB">
			<fileset dir="./language/admin">
				<include name="**/en-GB.com_easysdi_core.ini" />
			</fileset>
		</copy>
	</target>


</project>
